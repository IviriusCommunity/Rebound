<Project Sdk="Microsoft.NET.Sdk">

	<!-- Framework and platform configuration  -->
	<PropertyGroup Label="Framework Configuration">

		<!-- .NET and Windows targets -->
		<TargetFramework>net10.0-windows10.0.26100.0</TargetFramework>
		<TargetPlatformMinVersion>10.0.22000.0</TargetPlatformMinVersion>

		<!-- WinUI properties -->
		<UseWinUI>true</UseWinUI>
		<WinUISDKReferences>false</WinUISDKReferences>

		<!-- Platform targets -->
		<PlatformTarget>x64</PlatformTarget>
		<Platforms>x64</Platforms>

		<!-- C# language version -->
		<LangVersion>preview</LangVersion>

	</PropertyGroup>

	<!-- General application properties -->
	<PropertyGroup Label="Application Properties">

		<!-- Specific -->
		<AssemblyName>Rebound Updater</AssemblyName>
		<RootNamespace>Rebound.Updater</RootNamespace>
		<ApplicationIcon>Assets\Updater.ico</ApplicationIcon>

		<!-- Generic -->
		<OutputType>WinExe</OutputType>
		<DefaultLanguage>en-US</DefaultLanguage>
		<ApplicationManifest>app.manifest</ApplicationManifest>

		<!-- Versioning -->
		<AssemblyVersion>0.0.10</AssemblyVersion>
		<Version>0.0.10</Version>
		<FileVersion>0.0.10</FileVersion>

	</PropertyGroup>

	<!-- Advanced build features -->
	<PropertyGroup Label="Advanced Features">

		<!-- Generic -->
		<EnableMsixTooling>true</EnableMsixTooling>
		<WindowsAppSDKSelfContained>true</WindowsAppSDKSelfContained>

		<!-- Native AOT -->
		<!-- Enable COM interop support -->
		<EnableComInterop>true</EnableComInterop>
		<!-- Enable source generators -->
		<UseSourceGenerators>true</UseSourceGenerators>
		<!-- Disable runtime marshalling for better API handling -->
		<DisableRuntimeMarshalling>true</DisableRuntimeMarshalling>
		<!-- Run CsWin32 as a build task for COM NAOT compatibility -->
		<CsWin32RunAsBuildTask>true</CsWin32RunAsBuildTask>
		<!-- No idea what this is for but it fixes package publishing (thanks Rafael) -->
		<EnableSourceLink>false</EnableSourceLink>

	</PropertyGroup>

	<!-- Publishing and optimization -->
	<PropertyGroup Label="Publishing Configuration">

		<!-- Generic -->
		<PublishProfile>win-$(Platform).pubxml</PublishProfile>

		<!-- Native AOT -->
		<PublishAot>false</PublishAot>
		<SelfContained>true</SelfContained>
		<PublishReadyToRun>false</PublishReadyToRun>
		<PublishTrimmed>false</PublishTrimmed>
		<OptimizationPreference>Speed</OptimizationPreference>
		<IlcOptimizationPreference>Speed</IlcOptimizationPreference>

		<!-- Single file -->
		<PackageType>None</PackageType>
		<WindowsPackageType>None</WindowsPackageType>
		<PublishSingleFile>true</PublishSingleFile>

	</PropertyGroup>

	<!-- Packages -->

	<!-- Windows SDK & WinUI -->
	<ItemGroup>
		<PackageReference Include="Microsoft.Windows.SDK.BuildTools" Version="10.0.26100.7175" />
		<PackageReference Include="Microsoft.WindowsAppSDK" Version="1.8.251106002" />
		<PackageReference Include="WinUIEx" Version="2.9.0" />
	</ItemGroup>

	<!-- CommunityToolkit -->
	<ItemGroup Label="CommunityToolkit">
		<PackageReference Include="CommunityToolkit.Mvvm" Version="8.4.0" />
	</ItemGroup>

	<!-- Content -->
	<ItemGroup Label="Content">
		<Content Update="Assets\Updater.ico">
			<CopyToOutputDirectory>Always</CopyToOutputDirectory>
		</Content>
		<Page Update="MainPage.xaml">
			<Generator>MSBuild:Compile</Generator>
		</Page>
	</ItemGroup>

	<!-- Excluded items -->
	<ItemGroup Label="Exclusions">
		<None Remove="Assets\Updater.ico" />
		<None Remove="MainPage.xaml" />
	</ItemGroup>

	<!-- App manifest -->
	<ItemGroup>
		<Manifest Include="$(ApplicationManifest)" />
	</ItemGroup>

	<!-- Project references -->
	<ItemGroup>
		<ProjectReference Include="..\..\..\..\src\core\forge\Rebound.Forge.WinUI\Rebound.Forge.WinUI.csproj" />
	</ItemGroup>

	<!-- Shared imports -->
	<Import Project="..\..\..\..\src\core\forge\Rebound.Forge.Assets\Rebound.Forge.Assets.projitems" Label="Shared" />
	<Import Project="..\Rebound.Distribution\Rebound.Distribution.projitems" Label="Shared" />

</Project>