<?xml version="1.0" encoding="utf-8" ?>
<winuiex:WindowEx
    x:Class="Rebound.Defrag.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:animatedvisuals="using:Microsoft.UI.Xaml.Controls.AnimatedVisuals"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Rebound.Defrag"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:winuiex="using:WinUIEx"
    xmlns:titleBar="using:Riverside.Toolkit.Controls.TitleBar"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    mc:Ignorable="d">
    <Grid>
        <StackPanel Margin="15,5,15,13" Spacing="10">
            <InfoBar
                x:Name="HeaderInfoBar"
                Title="You can optimize your drives to help your computer run more efficiently, or analyze them to find out if they need to be optimized. Only drives on or connected to your computer are shown."
                x:FieldModifier="public"
                IsClosable="False"
                IsOpen="True"
                Message="Hover over a drive in the list to see its full path. Toggle the &quot;Advanced&quot; option to see system partitions." />
            <ListView
                x:Name="MyListView"
                Height="205"
                Padding="3"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Top"
                x:FieldModifier="public"
                Background="{ThemeResource SystemFillColorAttentionBackgroundBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="4"
                IsMultiSelectCheckBoxEnabled="True"
                SelectedIndex="0"
                SelectionChanged="ListviewSelectionChange"
                SelectionMode="Single">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" ToolTipService.ToolTip="{Binding DriveLetter}">
                            <CheckBox
                                Width="35"
                                MinWidth="0"
                                Click="CheckBox_Click"
                                IsChecked="{Binding IsChecked, Mode=TwoWay}" />
                            <Image
                                Width="24"
                                Height="24"
                                Margin="0,0,10,0"
                                Source="{Binding ImagePath}" />
                            <TextBlock VerticalAlignment="Center" Text="{Binding Name}" />
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
            <Grid>
                <ToggleSwitch
                    x:Name="AdvancedView"
                    x:FieldModifier="public"
                    OffContent="Advanced"
                    OnContent="Advanced"
                    Toggled="AdvancedView_Toggled" />
                <StackPanel
                    Margin="150,0,0,0"
                    HorizontalAlignment="Right"
                    Orientation="Horizontal"
                    Spacing="10">
                    <StackPanel.Resources>

                        <Style x:Key="AccentSplitButtonStyle" TargetType="SplitButton">
                            <Setter Property="Background" Value="{ThemeResource AccentFillColorDefaultBrush}" />
                            <Setter Property="Foreground" Value="{ThemeResource TextOnAccentFillColorPrimaryBrush}" />
                            <Setter Property="BorderBrush" Value="{ThemeResource ControlElevationBorderBrush}" />
                            <Setter Property="BorderThickness" Value="{ThemeResource SplitButtonBorderThemeThickness}" />
                            <Setter Property="HorizontalAlignment" Value="Left" />
                            <Setter Property="VerticalAlignment" Value="Center" />
                            <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}" />
                            <Setter Property="FontWeight" Value="Normal" />
                            <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}" />
                            <Setter Property="UseSystemFocusVisuals" Value="True" />
                            <Setter Property="FocusVisualMargin" Value="-1" />
                            <Setter Property="IsTabStop" Value="True" />
                            <Setter Property="Padding" Value="{ThemeResource ButtonPadding}" />
                            <Setter Property="CornerRadius" Value="{ThemeResource ControlCornerRadius}" />
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="SplitButton">
                                        <Grid
                                            x:Name="RootGrid"
                                            Background="Transparent"
                                            CornerRadius="{TemplateBinding CornerRadius}">
                                            <Grid.BackgroundTransition>
                                                <BrushTransition Duration="0:0:0.1" />
                                            </Grid.BackgroundTransition>
                                            <Grid.Resources>
                                                <!--  Override the style of the inner buttons so that they don't affect background/foreground/border colors  -->
                                                <Style TargetType="Button">
                                                    <Setter Property="Foreground" Value="{ThemeResource TextOnAccentFillColorPrimaryBrush}" />
                                                    <Setter Property="BorderBrush" Value="Transparent" />
                                                    <Setter Property="BorderThickness" Value="{ThemeResource SplitButtonBorderThemeThickness}" />
                                                    <Setter Property="HorizontalAlignment" Value="Left" />
                                                    <Setter Property="VerticalAlignment" Value="Center" />
                                                    <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}" />
                                                    <Setter Property="FontWeight" Value="Normal" />
                                                    <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}" />
                                                    <Setter Property="UseSystemFocusVisuals" Value="{StaticResource UseSystemFocusVisuals}" />
                                                    <Setter Property="FocusVisualMargin" Value="-3" />
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Grid x:Name="RootGrid" Background="Transparent">
                                                                    <ContentPresenter
                                                                        xmlns:local="using:Microsoft.UI.Xaml.Controls"
                                                                        x:Name="ContentPresenter"
                                                                        Padding="{TemplateBinding Padding}"
                                                                        HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                        VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                        local:AnimatedIcon.State="Normal"
                                                                        AutomationProperties.AccessibilityView="Raw"
                                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                                        Content="{TemplateBinding Content}"
                                                                        ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                        ContentTransitions="{TemplateBinding ContentTransitions}" />

                                                                    <VisualStateManager.VisualStateGroups>
                                                                        <VisualStateGroup x:Name="CommonStates">
                                                                            <VisualState x:Name="Normal">
                                                                                <VisualState.Setters>
                                                                                    <Setter Target="RootGrid.Background" Value="{ThemeResource AccentFillColorDefaultBrush}" />

                                                                                </VisualState.Setters>
                                                                            </VisualState>

                                                                            <VisualState x:Name="PointerOver">
                                                                                <VisualState.Setters>
                                                                                    <Setter Target="RootGrid.Background" Value="{ThemeResource AccentFillColorSecondaryBrush}" />

                                                                                </VisualState.Setters>
                                                                            </VisualState>

                                                                            <VisualState x:Name="Pressed">
                                                                                <VisualState.Setters>
                                                                                    <Setter Target="RootGrid.Background" Value="Transparent" />

                                                                                </VisualState.Setters>
                                                                            </VisualState>

                                                                            <VisualState x:Name="Disabled">
                                                                                <VisualState.Setters>
                                                                                    <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource SplitButtonForegroundDisabled}" />
                                                                                    <Setter Target="ContentPresenter.BorderBrush" Value="Transparent" />
                                                                                    <Setter Target="RootGrid.Background" Value="Transparent" />
                                                                                </VisualState.Setters>
                                                                            </VisualState>
                                                                        </VisualStateGroup>
                                                                    </VisualStateManager.VisualStateGroups>
                                                                </Grid>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Grid.Resources>

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition
                                                    x:Name="PrimaryButtonColumn"
                                                    Width="*"
                                                    MinWidth="{ThemeResource SplitButtonPrimaryButtonSize}" />
                                                <ColumnDefinition x:Name="Separator" Width="1" />
                                                <ColumnDefinition x:Name="SecondaryButtonColumn" Width="{ThemeResource SplitButtonSecondaryButtonSize}" />
                                            </Grid.ColumnDefinitions>
                                            <Grid
                                                x:Name="PrimaryBackgroundGrid"
                                                Grid.ColumnSpan="2"
                                                Background="{TemplateBinding Background}">
                                                <Grid.BackgroundTransition>
                                                    <BrushTransition Duration="0:0:0.1" />
                                                </Grid.BackgroundTransition>
                                            </Grid>
                                            <Grid
                                                x:Name="DividerBackgroundGrid"
                                                Grid.Column="1"
                                                Width="1"
                                                Background="{ThemeResource ControlStrokeColorOnAccentTertiaryBrush}" />
                                            <Grid
                                                x:Name="SecondaryBackgroundGrid"
                                                Grid.Column="2"
                                                Background="{TemplateBinding Background}">
                                                <Grid.BackgroundTransition>
                                                    <BrushTransition Duration="0:0:0.1" />
                                                </Grid.BackgroundTransition>
                                            </Grid>
                                            <Button
                                                x:Name="PrimaryButton"
                                                Grid.Column="0"
                                                Padding="{TemplateBinding Padding}"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Stretch"
                                                HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                                AutomationProperties.AccessibilityView="Raw"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="Transparent"
                                                BorderThickness="0"
                                                Command="{TemplateBinding Command}"
                                                CommandParameter="{TemplateBinding CommandParameter}"
                                                Content="{TemplateBinding Content}"
                                                ContentTemplate="{TemplateBinding ContentTemplate}"
                                                ContentTransitions="{TemplateBinding ContentTransitions}"
                                                FontFamily="{TemplateBinding FontFamily}"
                                                FontSize="{TemplateBinding FontSize}"
                                                FontWeight="{TemplateBinding FontWeight}"
                                                Foreground="{TemplateBinding Foreground}"
                                                IsTabStop="False" />
                                            <Button
                                                x:Name="SecondaryButton"
                                                Grid.Column="2"
                                                Padding="0,0,12,0"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Stretch"
                                                HorizontalContentAlignment="Stretch"
                                                VerticalContentAlignment="Stretch"
                                                AutomationProperties.AccessibilityView="Raw"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="Transparent"
                                                BorderThickness="0"
                                                Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"
                                                IsTabStop="False">
                                                <Button.Content>
                                                    <AnimatedIcon
                                                        Width="12"
                                                        Height="12"
                                                        HorizontalAlignment="Right"
                                                        VerticalAlignment="Center"
                                                        AutomationProperties.AccessibilityView="Raw">
                                                        <animatedvisuals:AnimatedChevronDownSmallVisualSource />
                                                        <AnimatedIcon.FallbackIconSource>
                                                            <FontIconSource
                                                                FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                FontSize="8"
                                                                Glyph="&#xE96E;"
                                                                IsTextScaleFactorEnabled="False" />
                                                        </AnimatedIcon.FallbackIconSource>
                                                    </AnimatedIcon>
                                                </Button.Content>
                                            </Button>
                                            <Grid
                                                x:Name="Border"
                                                Grid.ColumnSpan="3"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="{TemplateBinding CornerRadius}" />

                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CommonStates">
                                                    <VisualState x:Name="Normal">
                                                        <VisualState.Setters>
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorDefaultBrush}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorDefaultBrush}" />
                                                            <Setter Target="SecondaryButton.BorderBrush" Value="{x:Null}" />
                                                            <Setter Target="SecondaryButton.Foreground" Value="{ThemeResource TextOnAccentFillColorPrimaryBrush}" />

                                                        </VisualState.Setters>
                                                    </VisualState>

                                                    <VisualState x:Name="Disabled">
                                                        <VisualState.Setters>
                                                            <Setter Target="Border.BorderBrush" Value="{ThemeResource SplitButtonBorderBrushDisabled}" />
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorDisabledBrush}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorDisabledBrush}" />

                                                        </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="FlyoutOpen">
                                                        <VisualState.Setters>
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorTertiaryBrush}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorTertiaryBrush}" />
                                                            <Setter Target="Border.BorderBrush" Value="{ThemeResource SplitButtonBorderBrushPressed}" />
                                                            <Setter Target="PrimaryButton.Foreground" Value="{ThemeResource TextOnAccentFillColorPrimaryBrush}" />
                                                            <Setter Target="SecondaryButton.Foreground" Value="{ThemeResource TextOnAccentFillColorSecondaryBrush}" />

                                                        </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="TouchPressed">
                                                        <VisualState.Setters>
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorTertiaryBrush}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorTertiaryBrush}" />
                                                            <Setter Target="Border.BorderBrush" Value="{ThemeResource ControlStrokeColorOnAccentDefaultBrush}" />
                                                            <Setter Target="PrimaryButton.Foreground" Value="{ThemeResource TextOnAccentFillColorSecondaryBrush}" />
                                                            <Setter Target="SecondaryButton.Foreground" Value="{ThemeResource TextOnAccentFillColorSecondaryBrush}" />

                                                        </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="PrimaryPointerOver">
                                                        <VisualState.Setters>
                                                            <Setter Target="PrimaryButton.Foreground" Value="{ThemeResource TextOnAccentFillColorPrimaryBrush}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorDefaultBrush}" />

                                                        </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="PrimaryPressed">
                                                        <VisualState.Setters>
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorTertiaryBrush}" />
                                                            <Setter Target="PrimaryButton.Foreground" Value="{ThemeResource TextOnAccentFillColorSecondaryBrush}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorDefaultBrush}" />

                                                        </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="SecondaryPointerOver">
                                                        <VisualState.Setters>
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorDefaultBrush}" />
                                                            <Setter Target="SecondaryButton.BorderBrush" Value="{ThemeResource ControlStrokeColorOnAccentSecondaryBrush}" />
                                                            <Setter Target="SecondaryButton.Foreground" Value="{ThemeResource TextOnAccentFillColorPrimaryBrush}" />

                                                        </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="SecondaryPressed">
                                                        <VisualState.Setters>
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorDefaultBrush}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource AccentFillColorTertiaryBrush}" />
                                                            <Setter Target="SecondaryButton.Foreground" Value="{ThemeResource TextOnAccentFillColorSecondaryBrush}" />

                                                        </VisualState.Setters>
                                                    </VisualState>

                                                    <VisualState x:Name="Checked">
                                                        <VisualState.Setters>
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundChecked}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundChecked}" />
                                                            <Setter Target="Border.BorderBrush" Value="{ThemeResource SplitButtonBorderBrushChecked}" />
                                                            <Setter Target="PrimaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundChecked}" />
                                                            <Setter Target="SecondaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundChecked}" />
                                                            <Setter Target="DividerBackgroundGrid.Background" Value="{ThemeResource SplitButtonBorderBrushCheckedDivider}" />

                                                        </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="CheckedFlyoutOpen">
                                                        <VisualState.Setters>
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundCheckedPressed}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundCheckedPressed}" />
                                                            <Setter Target="Border.BorderBrush" Value="{ThemeResource SplitButtonBorderBrushCheckedPressed}" />
                                                            <Setter Target="PrimaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundCheckedPressed}" />
                                                            <Setter Target="SecondaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundCheckedPressed}" />
                                                            <Setter Target="DividerBackgroundGrid.Background" Value="{ThemeResource SplitButtonBorderBrushCheckedDivider}" />

                                                        </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="CheckedTouchPressed">
                                                        <VisualState.Setters>
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundCheckedPressed}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundCheckedPressed}" />
                                                            <Setter Target="Border.BorderBrush" Value="{ThemeResource SplitButtonBorderBrushCheckedPressed}" />
                                                            <Setter Target="PrimaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundCheckedPressed}" />
                                                            <Setter Target="SecondaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundCheckedPressed}" />
                                                            <Setter Target="DividerBackgroundGrid.Background" Value="{ThemeResource SplitButtonBorderBrushCheckedDivider}" />

                                                        </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="CheckedPrimaryPointerOver">
                                                        <VisualState.Setters>
                                                            <Setter Target="Border.BorderBrush" Value="{ThemeResource SplitButtonBorderBrushChecked}" />
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundCheckedPointerOver}" />
                                                            <Setter Target="PrimaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundCheckedPointerOver}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundChecked}" />
                                                            <Setter Target="SecondaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundChecked}" />
                                                            <Setter Target="DividerBackgroundGrid.Background" Value="{ThemeResource SplitButtonBorderBrushCheckedDivider}" />

                                                        </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="CheckedPrimaryPressed">
                                                        <VisualState.Setters>
                                                            <Setter Target="Border.BorderBrush" Value="{ThemeResource SplitButtonBorderBrushChecked}" />
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundCheckedPressed}" />
                                                            <Setter Target="PrimaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundCheckedPressed}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundChecked}" />
                                                            <Setter Target="SecondaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundChecked}" />
                                                            <Setter Target="DividerBackgroundGrid.Background" Value="{ThemeResource SplitButtonBorderBrushCheckedDivider}" />

                                                        </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="CheckedSecondaryPointerOver">
                                                        <VisualState.Setters>
                                                            <Setter Target="Border.BorderBrush" Value="{ThemeResource SplitButtonBorderBrushChecked}" />
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundChecked}" />
                                                            <Setter Target="PrimaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundChecked}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundCheckedPointerOver}" />
                                                            <Setter Target="SecondaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundCheckedPointerOver}" />
                                                            <Setter Target="DividerBackgroundGrid.Background" Value="{ThemeResource SplitButtonBorderBrushCheckedDivider}" />

                                                        </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="CheckedSecondaryPressed">
                                                        <VisualState.Setters>
                                                            <Setter Target="Border.BorderBrush" Value="{ThemeResource SplitButtonBorderBrushChecked}" />
                                                            <Setter Target="PrimaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundChecked}" />
                                                            <Setter Target="PrimaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundChecked}" />
                                                            <Setter Target="SecondaryBackgroundGrid.Background" Value="{ThemeResource SplitButtonBackgroundCheckedPressed}" />
                                                            <Setter Target="SecondaryButton.Foreground" Value="{ThemeResource SplitButtonForegroundCheckedPressed}" />
                                                            <Setter Target="DividerBackgroundGrid.Background" Value="{ThemeResource SplitButtonBorderBrushCheckedDivider}" />

                                                        </VisualState.Setters>
                                                    </VisualState>

                                                </VisualStateGroup>
                                                <VisualStateGroup x:Name="SecondaryButtonPlacementStates">
                                                    <VisualState x:Name="SecondaryButtonRight" />
                                                    <VisualState x:Name="SecondaryButtonSpan">
                                                        <VisualState.Setters>
                                                            <Setter Target="SecondaryButton.(Grid.Column)" Value="0" />
                                                            <Setter Target="SecondaryButton.(Grid.ColumnSpan)" Value="3" />

                                                        </VisualState.Setters>
                                                    </VisualState>

                                                </VisualStateGroup>

                                            </VisualStateManager.VisualStateGroups>
                                        </Grid>

                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </StackPanel.Resources>
                    <TextBlock
                        x:Name="CurrentDisk"
                        VerticalAlignment="Center"
                        TextWrapping="Wrap"
                        Visibility="Collapsed" />
                    <ProgressRing x:Name="CurrentProgress" IsIndeterminate="False" />
                    <Button
                        x:Name="AnalyzeButton"
                        Width="100"
                        Click="Button_Click_2"
                        Content="Analyze"
                        ToolTipService.ToolTip="Refresh the information of the selected drive to see whether it needs to be optimized or not." />
                    <SplitButton
                        x:Name="OptimizeButton"
                        Width="150"
                        Click="Button_Click"
                        IsEnabled="True"
                        Style="{ThemeResource AccentSplitButtonStyle}"
                        ToolTipService.ToolTip="Defragment and/or optimize the selected drive">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <Image
                                x:Name="Admin1"
                                Width="20"
                                Source="/Assets/Administrator.png" />
                            <TextBlock Text="Optimize" />
                        </StackPanel>
                        <SplitButton.Flyout>
                            <MenuFlyout>
                                <MenuFlyoutItem
                                    x:Name="OptimizeItem"
                                    Click="MenuFlyoutItem_Click"
                                    Text="Optimize selected drives">
                                    <MenuFlyoutItem.Icon>
                                        <ImageIcon x:Name="Admin2" Source="/Assets/Administrator.png" />
                                    </MenuFlyoutItem.Icon>
                                </MenuFlyoutItem>
                                <MenuFlyoutItem
                                    x:Name="OptimizeAllItem"
                                    Click="MenuFlyoutItem_Click_1"
                                    Text="Optimize all">
                                    <MenuFlyoutItem.Icon>
                                        <ImageIcon x:Name="Admin3" Source="/Assets/Administrator.png" />
                                    </MenuFlyoutItem.Icon>
                                </MenuFlyoutItem>
                                <MenuFlyoutItem Click="MenuFlyoutItem_Click_3" Text="Launch legacy app">
                                    <MenuFlyoutItem.Icon>
                                        <FontIcon Glyph="" />
                                    </MenuFlyoutItem.Icon>
                                </MenuFlyoutItem>
                                <MenuFlyoutItem Click="MenuFlyoutItem_Click_2" Text="Learn more">
                                    <MenuFlyoutItem.Icon>
                                        <FontIcon Glyph="" />
                                    </MenuFlyoutItem.Icon>
                                </MenuFlyoutItem>
                            </MenuFlyout>
                        </SplitButton.Flyout>
                    </SplitButton>
                </StackPanel>
            </Grid>
            <InfoBar
                x:Name="DetailsBar"
                Title="Unknown Drive (C:)"
                IsClosable="False"
                IsOpen="True"
                Message="Media type: Loading...&#x0a;Last analyzed or optimized: Loading...&#x0a;Current status: Loading..." />
            <Grid
                Height="120"
                Padding="15"
                Background="{ThemeResource SystemFillColorAttentionBackgroundBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="4">
                <StackPanel Spacing="5">
                    <TextBlock FontWeight="SemiBold" Text="Scheduled optimization" />
                    <TextBlock x:Name="ScheduledOptimizationDetails" Text="Off" />
                    <Button
                        Width="120"
                        Margin="0,5,0,0"
                        HorizontalAlignment="Right"
                        Click="Button_Click_1"
                        ToolTipService.ToolTip="Change scheduled optimization task settings.">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <Image
                                x:Name="Admin4"
                                Width="20"
                                Source="/Assets/Administrator.png" />
                            <TextBlock x:Name="ScheduledTaskText" Text="Turn on" />
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </StackPanel>
        <ListView Margin="15, 100" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" CornerRadius="4" BorderThickness="1" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}">
            <ListView.Header>
                <Grid Height="32" Background="{ThemeResource ControlFillColorInputActiveBrush}" CornerRadius="4, 4, 0, 0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="48"/>
                        <ColumnDefinition Width="1"/>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="1"/>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="1"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="1"/>
                        <ColumnDefinition Width="150"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Name" Grid.Column="2" VerticalAlignment="Center" Margin="0, 0, 12, 2" Style="{ThemeResource CaptionTextBlockStyle}" Opacity="0.8"/>
                    <Border Margin="0, 8" Background="{ThemeResource MenuFlyoutSeparatorThemeBrush}" Grid.Column="3"/>
                    <TextBlock Text="Type" Grid.Column="4" VerticalAlignment="Center" Margin="12, 0, 12, 2" Style="{ThemeResource CaptionTextBlockStyle}" Opacity="0.8"/>
                    <Border Margin="0, 8" Background="{ThemeResource MenuFlyoutSeparatorThemeBrush}" Grid.Column="5"/>
                    <TextBlock Text="Status" Grid.Column="6" VerticalAlignment="Center" Margin="12, 0, 12, 2" Style="{ThemeResource CaptionTextBlockStyle}" Opacity="0.8"/>
                    <Border Margin="0, 8" Background="{ThemeResource MenuFlyoutSeparatorThemeBrush}" Grid.Column="7"/>
                    <TextBlock Text="Last optimized" Grid.Column="8" VerticalAlignment="Center" Margin="12, 0, 12, 2" Style="{ThemeResource CaptionTextBlockStyle}" Opacity="0.8"/>
                </Grid>
            </ListView.Header>
            <ListView.Items>
                <ListViewItem>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="32"/>
                            <ColumnDefinition Width="1"/>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="1"/>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="1"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="1"/>
                            <ColumnDefinition Width="138"/>
                        </Grid.ColumnDefinitions>
                        <CheckBox/>
                        <StackPanel Orientation="Horizontal" Grid.Column="2" Spacing="8" VerticalAlignment="Center" Margin="0, 0, 12, 2">
                            <Image Source="ms-appx:///Assets/Drive.png" Width="20"/>
                            <TextBlock Text="Local Disk (C:)"/>
                        </StackPanel>
                        <TextBlock Text="SSD" Grid.Column="4" VerticalAlignment="Center" Margin="12, 0, 12, 2" Style="{ThemeResource CaptionTextBlockStyle}" Opacity="0.8"/>
                        <Grid Grid.Column="6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="50"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="73%" Margin="12, 0, 12, 2" VerticalAlignment="Center" Style="{ThemeResource CaptionTextBlockStyle}" Opacity="0.8"/>
                            <ProgressBar Value="73" Grid.Column="1"/>
                        </Grid>
                        <Border Margin="0, 8" Background="{ThemeResource MenuFlyoutSeparatorThemeBrush}" Grid.Column="7"/>
                        <TextBlock Text="Last optimized" Grid.Column="8" VerticalAlignment="Center" Margin="12, 0, 12, 2" Style="{ThemeResource CaptionTextBlockStyle}" Opacity="0.8"/>
                    </Grid>
                </ListViewItem>
                <ListViewItem/>
                <ListViewItem/>
                <ListViewItem/>
                <ListViewItem/>
            </ListView.Items>
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <CheckBox/>
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <titleBar:TitleBarEx x:Name="TitleBarControl" Loaded="TitleBarControl_Loaded" VerticalAlignment="Top" Title="Optimize Drives" Subtitle="  -  Developer Preview" IsMaximizable="False" UseWinUIEverywhere="True"/>
    </Grid>

</winuiex:WindowEx>
